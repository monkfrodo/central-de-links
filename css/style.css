:root {
  --bg:    #000;
  --card:  #111;
  --line:  rgba(255,255,255,.06);
  --t1:    #fff;
  --t2:    rgba(255,255,255,.5);
  --t3:    rgba(255,255,255,.2);
  --inv:   #000;
  --pill:  rgba(255,255,255,.07);
  --pill-a:rgba(255,255,255,.95);
  --ok:    #34d399;
  --warn:  #fbbf24;
  --err:   #f87171;
  --ok-bg: rgba(52,211,153,.1);
  --shade: rgba(0,0,0,.55);
  --pop:   #1c1c1e;
  --pop-b: rgba(255,255,255,.08);
  --pop-sh:0 24px 64px rgba(0,0,0,.7);
  --safe-t:env(safe-area-inset-top,0px);
  --safe-b:env(safe-area-inset-bottom,0px);
  color-scheme: dark;
}
@media(prefers-color-scheme:light){:root{
  --bg:    #f2f2f7;
  --card:  #fff;
  --line:  rgba(0,0,0,.06);
  --t1:    #000;
  --t2:    rgba(0,0,0,.45);
  --t3:    rgba(0,0,0,.12);
  --inv:   #fff;
  --pill:  rgba(0,0,0,.05);
  --pill-a:#000;
  --ok:    #16a34a;
  --warn:  #ca8a04;
  --err:   #dc2626;
  --ok-bg: rgba(22,163,74,.08);
  --shade: rgba(0,0,0,.3);
  --pop:   #fff;
  --pop-b: rgba(0,0,0,.06);
  --pop-sh:0 24px 64px rgba(0,0,0,.15);
  color-scheme: light;
}}

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html{height:100%;overflow:hidden}
body{font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text',system-ui,sans-serif;background:var(--bg);color:var(--t1);height:100%;overflow:hidden;-webkit-font-smoothing:antialiased}
.app{display:flex;flex-direction:column;height:100%}

/* Top bar */
.top{padding:calc(16px + var(--safe-t)) 20px 0;flex-shrink:0}
.top-row{display:flex;align-items:center;justify-content:space-between;height:44px;margin-bottom:12px}
.top h1{font-size:34px;font-weight:700;letter-spacing:-.5px}
.top-btns{display:flex;gap:2px}
.ib{width:36px;height:36px;border-radius:50%;border:none;background:transparent;color:var(--t2);cursor:pointer;display:flex;align-items:center;justify-content:center}
.ib:active{background:var(--pill)}
.ib svg{width:20px;height:20px}

/* Search */
.sbox{position:relative;margin-bottom:12px}
.sbox svg{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:var(--t3);width:17px;height:17px;pointer-events:none}
#s{width:100%;padding:10px 34px 10px 34px;background:var(--pill);border:none;border-radius:12px;color:var(--t1);font-size:17px;outline:none;-webkit-appearance:none}
#s::placeholder{color:var(--t3)}
.sx{position:absolute;right:8px;top:50%;transform:translateY(-50%);width:22px;height:22px;border-radius:50%;background:var(--t3);border:none;color:var(--bg);font-size:12px;font-weight:700;cursor:pointer;display:none;align-items:center;justify-content:center}
.sx.on{display:flex}

/* Pills */
.pills{display:flex;gap:8px;overflow-x:auto;scrollbar-width:none;-webkit-overflow-scrolling:touch;margin:0 -20px;padding:0 20px 14px}
.pills::-webkit-scrollbar{display:none}
.pill{padding:7px 16px;border-radius:100px;border:none;background:var(--pill);color:var(--t2);font-size:14px;font-weight:500;font-family:inherit;cursor:pointer;white-space:nowrap;flex-shrink:0;-webkit-appearance:none;transition:all .15s}
.pill:active{transform:scale(.95)}
.pill.on{background:var(--pill-a);color:var(--inv);font-weight:600}

/* Scroll */
.sc{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0 20px calc(80px + var(--safe-b))}

/* Section */
.sec{margin-bottom:8px}
.sec-t{font-size:13px;font-weight:600;color:var(--t2);padding:20px 0 8px;letter-spacing:.2px}

/* Card group */
.cg{background:var(--card);border-radius:14px;overflow:hidden}

/* Row */
.row{display:flex;align-items:center;gap:12px;padding:13px 14px;position:relative;cursor:pointer;transition:background .1s}
.row:active{background:var(--pill)}
.row+.row::before{content:'';position:absolute;top:0;left:14px;right:14px;height:1px;background:var(--line)}

.row-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.row-dot.on{background:var(--ok)}.row-dot.test{background:var(--warn)}.row-dot.off{background:var(--t3)}

.row-body{flex:1;min-width:0}
.row-name{font-size:16px;font-weight:400;line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.row-sub{font-size:13px;color:var(--t2);margin-top:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.row-cp{width:36px;height:36px;border-radius:10px;border:none;background:var(--pill);color:var(--t2);cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;-webkit-appearance:none;transition:all .15s}
.row-cp:active{transform:scale(.88)}
.row-cp svg{width:16px;height:16px}
.row-cp.ok{background:var(--ok-bg);color:var(--ok)}

/* FAB */
.fab{position:fixed;bottom:calc(20px + var(--safe-b));right:20px;width:54px;height:54px;border-radius:50%;background:var(--pill-a);border:none;color:var(--inv);font-size:26px;font-weight:300;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:50;-webkit-appearance:none}
.fab:active{transform:scale(.88)}

/* Overlay */
.ov{display:none;position:fixed;inset:0;background:var(--shade);z-index:200}
.ov.on{display:block}

/* Sheet */
.sh{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-radius:16px 16px 0 0;padding:8px 20px calc(16px + var(--safe-b));z-index:201;transform:translateY(100%);transition:transform .32s cubic-bezier(.32,.72,0,1);max-height:90vh;overflow-y:auto;-webkit-overflow-scrolling:touch}
.sh.on{transform:translateY(0)}
.sh-bar{width:36px;height:5px;border-radius:3px;background:var(--t3);margin:0 auto 16px}
.sh h2{font-size:17px;font-weight:600;text-align:center;margin-bottom:20px}
.fi{margin-bottom:14px}
.fi label{display:block;font-size:13px;color:var(--t2);margin-bottom:5px;font-weight:500}
.fi input,.fi select,.fi textarea{width:100%;padding:12px 14px;background:var(--pill);border:1px solid var(--line);border-radius:10px;color:var(--t1);font-size:16px;font-family:inherit;outline:none;-webkit-appearance:none}
.fi input:focus,.fi select:focus,.fi textarea:focus{border-color:var(--t3)}
.fi textarea{resize:none;min-height:56px}
.sh-btns{display:flex;gap:10px;margin-top:18px}
.sb{flex:1;padding:15px;border-radius:14px;border:none;font-size:16px;font-weight:600;font-family:inherit;cursor:pointer;-webkit-appearance:none}
.sb:active{transform:scale(.97)}
.sb-c{background:var(--pill);color:var(--t2)}
.sb-s{background:var(--pill-a);color:var(--inv);flex:2}

/* Popup menu */
.pm-ov{display:none;position:fixed;inset:0;z-index:300}
.pm-ov.on{display:block}
.pm{position:fixed;background:var(--pop);border:1px solid var(--pop-b);border-radius:14px;padding:4px;min-width:180px;z-index:301;box-shadow:var(--pop-sh);display:none}
.pm-i{display:flex;align-items:center;gap:10px;padding:11px 14px;border-radius:10px;border:none;background:transparent;color:var(--t1);font-size:15px;font-family:inherit;width:100%;cursor:pointer;text-align:left}
.pm-i:active{background:var(--pill)}
.pm-i svg{width:17px;height:17px;flex-shrink:0;color:var(--t2)}
.pm-i.red{color:var(--err)}
.pm-i.red svg{color:var(--err)}
.pm-sep{height:1px;background:var(--line);margin:4px 10px}

/* Toast */
.toast{position:fixed;bottom:calc(88px + var(--safe-b));left:50%;transform:translateX(-50%) translateY(60px);background:var(--pop);color:var(--t1);padding:10px 22px;border-radius:100px;font-size:14px;font-weight:500;z-index:400;transition:transform .25s cubic-bezier(.16,1,.3,1);pointer-events:none;white-space:nowrap;box-shadow:var(--pop-sh)}
.toast.on{transform:translateX(-50%) translateY(0)}

.empty{text-align:center;padding:80px 20px;color:var(--t3);font-size:15px}

@media(min-width:640px){
  .top,.sc{max-width:560px;margin-left:auto;margin-right:auto}
  .pills{margin:0;padding-left:0;padding-right:0}
  .sh{left:50%;right:auto;width:440px;transform:translateX(-50%) translateY(100%)}
  .sh.on{transform:translateX(-50%) translateY(0)}
  .fab{right:calc(50% - 280px + 20px)}
}
